{"ast":null,"code":"import _regeneratorRuntime from \"/Users/NicolasImhoff/Documents/GitHub/Recycle-Game/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/NicolasImhoff/Documents/GitHub/Recycle-Game/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport actions from './actions';\nimport { Auth } from \"aws-amplify\";\n\nvar setSanity = function setSanity(sanity) {\n  return function (dispatch) {\n    console.log(sanity);\n    return dispatch(actions.setSanity(sanity));\n  };\n};\n\nvar setGameover = function setGameover(gameover) {\n  return function (dispatch) {\n    return dispatch(actions.setGameover(gameover));\n  };\n};\n\nvar setEmail = function setEmail(email) {\n  if (email === undefined) {\n    email = localStorage.getItem('email');\n  }\n\n  localStorage.setItem('email', email);\n  return function (dispatch) {\n    return dispatch(actions.setEmail(email));\n  };\n};\n\nvar setPassword = function setPassword(password) {\n  return function (dispatch) {\n    return dispatch(actions.setPassword(password));\n  };\n};\n\nvar setGamescore = function setGamescore(gamescore) {\n  return function (dispatch) {\n    return dispatch(actions.setGamescore(gamescore));\n  };\n};\n\nvar updateHighscore = function updateHighscore(email) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return axios.get(\"https://aqq11p2sd0.execute-api.us-east-2.amazonaws.com/default/getUser?email=\".concat(email));\n\n              case 3:\n                response = _context.sent;\n                console.log(\"updating highscore: \" + response);\n                return _context.abrupt(\"return\", dispatch(actions.updateHighscore(response.data.Items[0].score)));\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                return _context.abrupt(\"return\", dispatch(actions.updateHighscore(0)));\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 8]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nvar updateLeaderboard = function updateLeaderboard() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch) {\n        var response, leaderboard;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return axios.get(\"https://aqq11p2sd0.execute-api.us-east-2.amazonaws.com/default/getLeaderboard\");\n\n              case 3:\n                response = _context2.sent;\n                leaderboard = [];\n                response.data.forEach(function (element) {\n                  leaderboard.push(element[0]);\n                });\n                return _context2.abrupt(\"return\", dispatch(actions.updateLeaderboard(leaderboard)));\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](0);\n                return _context2.abrupt(\"return\", dispatch(actions.updateLeaderboard([])));\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 9]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nvar sendGamescore = function sendGamescore(email, gamescore) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return axios.get(\"https://aqq11p2sd0.execute-api.us-east-2.amazonaws.com/default/updateScore?email=\".concat(email, \"&score=\").concat(gamescore));\n\n              case 3:\n                return _context3.abrupt(\"return\", dispatch(actions.sendGamescore(gamescore)));\n\n              case 6:\n                _context3.prev = 6;\n                _context3.t0 = _context3[\"catch\"](0);\n                return _context3.abrupt(\"return\", dispatch(actions.sendGamescore(gamescore)));\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 6]]);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nvar login = function login(email, password) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(dispatch) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return Auth.signIn(email, password);\n\n              case 3:\n                _context4.next = 5;\n                return axios.get(\"https://aqq11p2sd0.execute-api.us-east-2.amazonaws.com/default/getUser?email=\".concat(email));\n\n              case 5:\n                response = _context4.sent;\n                console.log(response.data.Items[0].score);\n                return _context4.abrupt(\"return\", dispatch(actions.login(email, response.data.Items[0].score)));\n\n              case 10:\n                _context4.prev = 10;\n                _context4.t0 = _context4[\"catch\"](0);\n                alert(_context4.t0.message);\n                return _context4.abrupt(\"return\", dispatch(actions.loginFail()));\n\n              case 14:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 10]]);\n      }));\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nvar createAccount = function createAccount(email, password) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref5 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(dispatch) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return Auth.signUp({\n                  username: email,\n                  password: password\n                });\n\n              case 3:\n                _context5.next = 5;\n                return Auth.signIn(email, password);\n\n              case 5:\n                _context5.next = 7;\n                return axios.get(\"https://aqq11p2sd0.execute-api.us-east-2.amazonaws.com/default/getUser?email=\".concat(email));\n\n              case 7:\n                response = _context5.sent;\n                return _context5.abrupt(\"return\", dispatch(actions.createAccount(response.data.Items[0].score)));\n\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](0);\n                alert(_context5.t0.message);\n                return _context5.abrupt(\"return\", dispatch(actions.createAccountFail()));\n\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 11]]);\n      }));\n\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nexport default {\n  setSanity: setSanity,\n  setGameover: setGameover,\n  setEmail: setEmail,\n  setPassword: setPassword,\n  setGamescore: setGamescore,\n  updateHighscore: updateHighscore,\n  updateLeaderboard: updateLeaderboard,\n  sendGamescore: sendGamescore,\n  login: login,\n  createAccount: createAccount\n};","map":{"version":3,"sources":["/Users/NicolasImhoff/Documents/GitHub/Recycle-Game/frontend/src/app/home/duck/operations.js"],"names":["axios","actions","Auth","setSanity","sanity","dispatch","console","log","setGameover","gameover","setEmail","email","undefined","localStorage","getItem","setItem","setPassword","password","setGamescore","gamescore","updateHighscore","get","response","data","Items","score","updateLeaderboard","leaderboard","forEach","element","push","sendGamescore","login","signIn","alert","message","loginFail","createAccount","signUp","username","createAccountFail"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport actions from './actions';\nimport { Auth } from \"aws-amplify\";\n\nconst setSanity = sanity => {\n  return dispatch => {\n    console.log(sanity)\n    return dispatch(actions.setSanity(sanity));\n  };\n};\n\nconst setGameover = gameover => {\n  return dispatch => {\n    return dispatch(actions.setGameover(gameover));\n  };\n};\n\nconst setEmail = email => {\n  if ((email) === undefined) {\n    email = localStorage.getItem('email');\n  }\n  localStorage.setItem('email', email);\n  return dispatch => {\n    return dispatch(actions.setEmail(email));\n  };\n};\n\nconst setPassword = password => {\n  return dispatch => {\n    return dispatch(actions.setPassword(password));\n  };\n};\n\nconst setGamescore = gamescore => {\n  return dispatch => {\n    return dispatch(actions.setGamescore(gamescore));\n  };\n}\n\nconst updateHighscore = email => {\n  return async dispatch => {\n    try {\n      const response = await axios.get(\n        `https://aqq11p2sd0.execute-api.us-east-2.amazonaws.com/default/getUser?email=${email}`\n      );\n      console.log (\"updating highscore: \" + response)\n      return dispatch(actions.updateHighscore(response.data.Items[0].score));\n    } catch (error) {\n      return dispatch(actions.updateHighscore(0));\n    }\n  };\n}\n\nconst updateLeaderboard = () => {\n  return async dispatch => {\n    try {\n      const response = await axios.get(\n        `https://aqq11p2sd0.execute-api.us-east-2.amazonaws.com/default/getLeaderboard`\n      );\n      var leaderboard = [];\n      response.data.forEach((element) => {\n        leaderboard.push(element[0]);\n      });\n      \n      return dispatch(actions.updateLeaderboard(leaderboard));\n    } catch (error) {\n      return dispatch(actions.updateLeaderboard([]));\n    }\n  };\n}\n\nconst sendGamescore = (email, gamescore) => {\n  return async dispatch => {\n    try {\n      await axios.get(\n        `https://aqq11p2sd0.execute-api.us-east-2.amazonaws.com/default/updateScore?email=${email}&score=${gamescore}`\n      )\n      return dispatch(actions.sendGamescore(gamescore));\n    } catch (error) {\n      return dispatch(actions.sendGamescore(gamescore));\n    }\n  };\n}\n\nconst login = (email, password) => {\n  return async dispatch => {\n    try {\n      await Auth.signIn(email, password);\n      const response = await axios.get(\n        `https://aqq11p2sd0.execute-api.us-east-2.amazonaws.com/default/getUser?email=${email}`\n      );\n      console.log(response.data.Items[0].score)\n      return dispatch(actions.login(email, response.data.Items[0].score));\n    } catch (error) {\n      alert(error.message);\n      return dispatch(actions.loginFail());\n    }\n  };\n};\n\nconst createAccount = (email, password) => {\n  return async dispatch => {\n    try {\n      await Auth.signUp({\n        username: email,\n        password: password\n      });\n      await Auth.signIn(email, password);\n      const response = await axios.get(\n        `https://aqq11p2sd0.execute-api.us-east-2.amazonaws.com/default/getUser?email=${email}`\n      );\n      return dispatch(actions.createAccount(response.data.Items[0].score));\n    } catch (error) {\n      alert(error.message);\n      return dispatch(actions.createAccountFail());\n    }\n  };\n};\n\nexport default {\n  setSanity,\n  setGameover,\n  setEmail,\n  setPassword,\n  setGamescore,\n  updateHighscore,\n  updateLeaderboard,\n  sendGamescore,\n  login,\n  createAccount\n};\n"]},"metadata":{},"sourceType":"module"}